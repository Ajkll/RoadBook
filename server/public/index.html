<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RoadBook API Tester</title>
    <style>
        :root {
            --primary-color: #4361ee;
            --secondary-color: #3a0ca3;
            --success-color: #4cc9f0;
            --warning-color: #f72585;
            --danger-color: #f72585;
            --light-color: #f8f9fa;
            --dark-color: #212529;
            --text-color: #212529;
            --body-bg: #f9fafb;
            --card-bg: #ffffff;
            --border-color: #e9ecef;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Roboto, Arial, sans-serif;
            background-color: var(--body-bg);
            color: var(--text-color);
            line-height: 1.6;
            max-width: 1500px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header Styles */
        .app-header {
            background-color: var(--primary-color);
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .app-title {
            font-size: 1.5rem;
            margin: 0;
        }

        .app-subtitle {
            font-size: 0.9rem;
            font-weight: normal;
            opacity: 0.9;
            margin-top: 5px;
        }

        /* Module Navigation */
        .module-nav {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-bottom: 30px;
        }

        .module-button {
            padding: 15px;
            background-color: var(--light-color);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            text-align: center;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .module-button i {
            font-size: 1.5rem;
            margin-bottom: 8px;
        }

        .module-button.active {
            background-color: var(--primary-color);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .module-button:hover:not(.active) {
            background-color: #e9ecef;
        }

        /* Module Containers */
        .module-container {
            display: none;
            animation: fadeIn 0.4s ease;
        }

        .module-container.active {
            display: block;
        }

        @keyframes fadeIn {
            0% { opacity: 0; transform: translateY(10px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        /* Card Layout */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .card {
            background-color: var(--card-bg);
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            overflow: hidden;
            transition: box-shadow 0.3s ease;
        }

        .card:hover {
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .card-header {
            background-color: var(--light-color);
            padding: 15px 20px;
            font-weight: 600;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-body {
            padding: 20px;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .form-control {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 0.9rem;
            transition: border-color 0.3s;
        }

        .form-control:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }

        .form-control-textarea {
            height: 120px;
            resize: vertical;
        }

        /* Button Styles */
        .btn {
            display: inline-block;
            padding: 10px 16px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s;
            margin-right: 8px;
            margin-bottom: 8px;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--secondary-color);
        }

        .btn-secondary {
            background-color: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background-color: #5a6268;
        }

        .btn-success {
            background-color: var(--success-color);
            color: white;
        }

        .btn-danger {
            background-color: var(--danger-color);
            color: white;
        }

        /* Badges */
        .badge {
            display: inline-block;
            padding: 4px 8px;
            font-size: 0.8rem;
            font-weight: 500;
            border-radius: 20px;
            margin-right: 5px;
        }

        .badge-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .badge-success {
            background-color: #4cc9f0;
            color: white;
        }

        .badge-warning {
            background-color: #f9c74f;
            color: #212529;
        }

        .badge-danger {
            background-color: var(--danger-color);
            color: white;
        }

        /* Authentication Status */
        .auth-status {
            display: flex;
            align-items: center;
            font-size: 0.9rem;
        }

        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-connected {
            background-color: #4cc9f0;
        }

        .status-disconnected {
            background-color: #f72585;
        }

        /* Lists and Items */
        .list-group {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .list-item {
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.2s;
        }

        .list-item:hover {
            background-color: #f8f9fa;
        }

        .list-item-title {
            font-weight: 600;
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* Response Area */
        .response-container {
            padding: 20px;
            border-radius: 8px;
            background-color: #212529;
            color: #f8f9fa;
            overflow: auto;
            font-family: monospace;
            margin-top: 20px;
        }

        #response-output {
            width: 100%;
            height: 400px;
            background-color: #343a40;
            color: #f8f9fa;
            border: none;
            border-radius: 8px;
            padding: 15px;
            font-family: monospace;
            resize: vertical;
        }

        /* User Guide */
        .user-guide {
            background-color: #fff3cd;
            border-left: 4px solid #f9c74f;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 4px;
        }

        .user-guide h3 {
            color: #856404;
            margin-bottom: 10px;
            font-size: 1rem;
        }

        .user-guide ul {
            margin-left: 20px;
        }

        .user-guide li {
            margin-bottom: 5px;
        }

        /* Misc */
        .text-muted {
            color: #6c757d;
            font-size: 0.85rem;
        }

        .scroll-container {
            max-height: 500px;
            overflow-y: auto;
            padding-right: 5px;
        }

        .hidden {
            display: none;
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .alert-info {
            background-color: #cff4fc;
            border: 1px solid #b6effb;
            color: #055160;
        }

        .alert-success {
            background-color: #d1e7dd;
            border: 1px solid #badbcc;
            color: #0f5132;
        }

        .alert-warning {
            background-color: #fff3cd;
            border: 1px solid #ffecb5;
            color: #664d03;
        }

        .alert-danger {
            background-color: #f8d7da;
            border: 1px solid #f5c2c7;
            color: #842029;
        }

        /* Icons (fake with emoji) */
        .icon {
            font-style: normal;
            font-size: 1.2rem;
        }
        
        /* Competencies Module Styles */
        .competencies-container {
            max-height: 600px;
            overflow-y: auto;
        }
        
        .phase-container {
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .phase-title {
            background-color: var(--primary-color);
            color: white;
            padding: 10px 15px;
            margin: 0;
            font-size: 1rem;
        }
        
        .categories-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            padding: 15px;
        }
        
        .category-container {
            border: 1px solid var(--border-color);
            border-radius: 6px;
            overflow: hidden;
            background-color: white;
        }
        
        .category-title {
            background-color: #f8f9fa;
            padding: 8px 12px;
            margin: 0;
            font-size: 0.9rem;
            border-bottom: 1px solid var(--border-color);
        }
        
        .competencies-list {
            list-style: none;
            margin: 0;
            padding: 0;
        }
        
        .competency-item {
            padding: 12px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .competency-item:last-child {
            border-bottom: none;
        }
        
        .competency-name {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .competency-description {
            font-size: 0.85rem;
            color: #6c757d;
            margin-bottom: 8px;
        }
        
        .details-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 15px;
        }
        
        .details-table td {
            padding: 8px;
            border: 1px solid var(--border-color);
        }
        
        .details-table td:first-child {
            width: 150px;
            background-color: #f8f9fa;
        }
        
        .description-section {
            margin-top: 15px;
        }
        
        .description-section h4 {
            margin-bottom: 8px;
            font-size: 0.95rem;
        }
        
        .progress-bar-container {
            width: 100%;
            height: 20px;
            background-color: #f0f0f0;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-bar {
            width: 100%;
            height: 100%;
        }
        
        .progress-fill {
            height: 100%;
            background-color: var(--primary-color);
            color: white;
            text-align: center;
            line-height: 20px;
            font-size: 12px;
            transition: width 0.3s ease;
        }
        
        .progress-stats {
            margin-bottom: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 8px;
        }
        
        .stats-details {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }
        
        .stat-item {
            flex: 1;
            text-align: center;
            padding: 10px;
        }
        
        .stat-label {
            font-size: 0.85rem;
            color: #6c757d;
        }
        
        .stat-value {
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .phase-progress, .category-progress {
            margin-bottom: 15px;
        }
        
        .phase-progress-percentage, .category-progress-percentage {
            font-size: 0.85rem;
            font-weight: normal;
            color: #6c757d;
        }
        
        .competencies-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        
        .competencies-table th, .competencies-table td {
            padding: 8px;
            border: 1px solid var(--border-color);
            text-align: left;
        }
        
        .competencies-table th {
            background-color: #f8f9fa;
            font-weight: 600;
        }
        
        .status-badge {
            padding: 4px 8px;
            border-radius: 10px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .status-not-started {
            background-color: #dee2e6;
            color: #495057;
        }
        
        .status-in-progress {
            background-color: #cff4fc;
            color: #055160;
        }
        
        .status-mastered {
            background-color: #d1e7dd;
            color: #0f5132;
        }
        
        .status-select {
            width: auto;
            display: inline-block;
            padding: 4px;
            font-size: 0.85rem;
            margin-right: 5px;
        }
        
        .competency-validation-item {
            margin-bottom: 10px;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background-color: #f8f9fa;
        }
        
        .competency-validation-item label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        .competency-validation-item textarea {
            width: 100%;
            padding: 5px;
            margin-top: 5px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
        }
        
        .validation-message {
            padding: 15px;
            font-style: italic;
            color: #6c757d;
            text-align: center;
        }
        
        .status-distribution {
            margin-top: 20px;
        }
        
        .status-counts {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }
        
        .status-count-item {
            flex: 1;
            text-align: center;
            padding: 15px 10px;
            border-radius: 6px;
            margin: 0 5px;
        }
        
        .status-count-item.mastered {
            background-color: #d1e7dd;
        }
        
        .status-count-item.in-progress {
            background-color: #cff4fc;
        }
        
        .status-count-item.not-started {
            background-color: #f8f9fa;
        }
        
        .status-count-label {
            font-size: 0.85rem;
            margin-bottom: 5px;
        }
        
        .status-count-value {
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        /* Progress bar for small containers */
        .progress-bar-container.small {
            height: 12px;
        }
        
        .progress-bar-container.small .progress-fill {
            line-height: 12px;
            font-size: 8px;
        }
        
        /* Community Module Styles */
        .post-card {
            border: 1px solid var(--border-color);
            border-radius: 8px;
            margin-bottom: 15px;
            padding: 15px;
            background-color: white;
        }
        
        .post-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .post-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .post-meta {
            font-size: 0.8rem;
            color: #6c757d;
            margin-bottom: 10px;
        }
        
        .post-content {
            margin-bottom: 15px;
        }
        
        .post-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 10px;
            border-top: 1px solid var(--border-color);
        }
        
        .post-stats {
            display: flex;
            gap: 15px;
        }
        
        .post-actions {
            display: flex;
            gap: 5px;
        }
        
        .like-button {
            color: #dc3545;
        }
        
        .like-button.liked {
            background-color: #dc3545;
            color: white;
            border-color: #dc3545;
        }
        
        .comment {
            border: 1px solid var(--border-color);
            border-radius: 8px;
            margin-bottom: 10px;
            padding: 10px;
        }
        
        .comment-header {
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
            margin-bottom: 5px;
        }
        
        .comment-author {
            font-weight: 600;
        }
        
        .comment-content {
            margin-top: 5px;
        }
        
        .like-item {
            display: flex;
            justify-content: space-between;
            padding: 8px;
            border-bottom: 1px solid var(--border-color);
        }
        
        /* Notifications Module Styles */
        .notification-item {
            border: 1px solid var(--border-color);
            border-radius: 8px;
            margin-bottom: 10px;
            padding: 12px;
            background-color: white;
        }
        
        .notification-unread {
            background-color: #f8f9fa;
            border-left: 4px solid var(--primary-color);
        }
        
        .notification-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .notification-title {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .notification-date {
            font-size: 0.8rem;
            color: #6c757d;
        }
        
        .notification-actions {
            display: flex;
            justify-content: flex-end;
            gap: 5px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <header class="app-header">
        <div>
            <h1 class="app-title">RoadBook API Tester</h1>
            <div class="app-subtitle">Environment de test pour les API des modules</div>
        </div>
        <div class="auth-status" id="auth-status-container">
            <div class="status-indicator status-disconnected" id="status-indicator"></div>
            <span id="auth-status-text">Non connecté</span>
        </div>
    </header>

    <div class="module-nav" id="module-nav">
        <button class="module-button active" data-module="welcome">
            <span class="icon">🏠</span>
            Accueil
        </button>
        <button class="module-button" data-module="auth">
            <span class="icon">🔐</span>
            Authentification
        </button>
        <button class="module-button" data-module="users">
            <span class="icon">👤</span>
            Utilisateurs
        </button>
        <button class="module-button" data-module="roadbooks">
            <span class="icon">📔</span>
            RoadBooks
        </button>
        <button class="module-button" data-module="sessions">
            <span class="icon">🚗</span>
            Sessions
        </button>
        <button class="module-button" data-module="competencies">
            <span class="icon">📊</span>
            Compétences
        </button>
        <button class="module-button" onclick="window.location.href='/marketplace-test.html'">
            <span class="icon">🛒</span>
            Marketplace
        </button>
        <button class="module-button" onclick="window.location.href='/test-modules.html'">
            <span class="icon">🧪</span>
            Test Modules
        </button>
        <button class="module-button" data-module="debug">
            <span class="icon">🔍</span>
            API Debug
        </button>
    </div>

    <!-- Welcome Module -->
    <section id="welcome-module" class="module-container active">
        <div class="card">
            <div class="card-header">
                Bienvenue dans le testeur d'API RoadBook
            </div>
            <div class="card-body">
                <div class="alert alert-info">
                    <p>Cet outil permet de tester les différentes fonctionnalités de l'API RoadBook en mode développement.</p>
                </div>
                
                <h3 style="margin-top: 20px; margin-bottom: 10px;">Modules disponibles</h3>
                <div class="card-grid">
                    <div class="card">
                        <div class="card-header">Module Authentification</div>
                        <div class="card-body">
                            <p>Tester les fonctionnalités d'inscription, connexion, et gestion des tokens.</p>
                            <button class="btn btn-primary" onclick="showModule('auth')">Accéder</button>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">Module Utilisateurs</div>
                        <div class="card-body">
                            <p>Gestion des profils utilisateurs, modifications et recherche.</p>
                            <button class="btn btn-primary" onclick="showModule('users')">Accéder</button>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">Module RoadBooks</div>
                        <div class="card-body">
                            <p>Création et gestion des carnets d'apprentissage de conduite.</p>
                            <button class="btn btn-primary" onclick="showModule('roadbooks')">Accéder</button>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">Module Sessions</div>
                        <div class="card-body">
                            <p>Enregistrement et suivi des sessions de conduite.</p>
                            <button class="btn btn-primary" onclick="showModule('sessions')">Accéder</button>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">Module Compétences</div>
                        <div class="card-body">
                            <p>Gestion et suivi de la progression des compétences de conduite.</p>
                            <button class="btn btn-primary" onclick="showModule('competencies')">Accéder</button>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">Module Marketplace</div>
                        <div class="card-body">
                            <p>Achat et vente de produits et services pédagogiques.</p>
                            <button class="btn btn-primary" onclick="window.location.href='/marketplace-test.html'">Accéder</button>
                        </div>
                    </div>
                </div>
                
                <div class="user-guide" style="margin-top: 20px;">
                    <h3>Guide d'utilisation</h3>
                    <ul>
                        <li>Commencez par vous <strong>inscrire</strong> ou vous <strong>connecter</strong> dans le module Authentification</li>
                        <li>Une fois connecté, testez les différentes fonctionnalités des modules</li>
                        <li>Utilisez le module Debug pour voir les réponses détaillées de l'API</li>
                        <li>Le module <strong>Compétences</strong> permet de suivre la progression des compétences de conduite par phase et catégorie</li>
                        <li>Le module <strong>Communauté</strong> permet de créer et interagir avec des publications et commentaires</li>
                        <li>Le module <strong>Badges</strong> permet de gérer les badges de gamification</li>
                        <li>Le module <strong>Marketplace</strong> permet de gérer les produits et services (interface séparée)</li>
                        <li>Le module <strong>Notifications</strong> permet de gérer les alertes et messages du système</li>
                    </ul>
                </div>
                
                <h3 style="margin-top: 20px; margin-bottom: 10px;">Comptes de test</h3>
                <table style="width: 100%; border-collapse: collapse; margin-top: 10px;">
                    <thead>
                        <tr style="background-color: #f8f9fa; text-align: left;">
                            <th style="padding: 10px; border: 1px solid #dee2e6;">Email</th>
                            <th style="padding: 10px; border: 1px solid #dee2e6;">Mot de passe</th>
                            <th style="padding: 10px; border: 1px solid #dee2e6;">Rôle</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="padding: 10px; border: 1px solid #dee2e6;">apprentice@roadbook.com</td>
                            <td style="padding: 10px; border: 1px solid #dee2e6;">Password123!</td>
                            <td style="padding: 10px; border: 1px solid #dee2e6;">APPRENTICE</td>
                        </tr>
                        <tr>
                            <td style="padding: 10px; border: 1px solid #dee2e6;">guide@roadbook.com</td>
                            <td style="padding: 10px; border: 1px solid #dee2e6;">Password123!</td>
                            <td style="padding: 10px; border: 1px solid #dee2e6;">GUIDE</td>
                        </tr>
                        <tr>
                            <td style="padding: 10px; border: 1px solid #dee2e6;">instructor@roadbook.com</td>
                            <td style="padding: 10px; border: 1px solid #dee2e6;">Password123!</td>
                            <td style="padding: 10px; border: 1px solid #dee2e6;">INSTRUCTOR</td>
                        </tr>
                        <tr>
                            <td style="padding: 10px; border: 1px solid #dee2e6;">admin@roadbook.com</td>
                            <td style="padding: 10px; border: 1px solid #dee2e6;">Password123!</td>
                            <td style="padding: 10px; border: 1px solid #dee2e6;">ADMIN</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!-- Auth Module -->
    <section id="auth-module" class="module-container">
        <div class="card-grid">
            <div class="card">
                <div class="card-header">Inscription</div>
                <div class="card-body">
                    <div class="form-group">
                        <label for="register-email">Email</label>
                        <input type="email" id="register-email" class="form-control" placeholder="Email" value="test@example.com">
                    </div>
                    <div class="form-group">
                        <label for="register-password">Mot de passe</label>
                        <input type="password" id="register-password" class="form-control" placeholder="Mot de passe" value="Password123!">
                    </div>
                    <div class="form-group">
                        <label for="register-display-name">Nom d'affichage</label>
                        <input type="text" id="register-display-name" class="form-control" placeholder="Nom d'affichage" value="Test User">
                    </div>
                    <div class="form-group">
                        <label for="register-role">Rôle</label>
                        <select id="register-role" class="form-control">
                            <option value="APPRENTICE">Apprentice</option>
                            <option value="GUIDE">Guide</option>
                            <option value="INSTRUCTOR">Instructor</option>
                            <option value="ADMIN">Admin</option>
                        </select>
                    </div>
                    <button class="btn btn-primary" onclick="register()">S'inscrire</button>
                </div>
            </div>

            <div class="card">
                <div class="card-header">Connexion</div>
                <div class="card-body">
                    <div class="form-group">
                        <label for="login-email">Email</label>
                        <input type="email" id="login-email" class="form-control" placeholder="Email" value="apprentice@roadbook.com">
                    </div>
                    <div class="form-group">
                        <label for="login-password">Mot de passe</label>
                        <input type="password" id="login-password" class="form-control" placeholder="Mot de passe" value="Password123!">
                    </div>
                    <button class="btn btn-primary" onclick="login()">Se connecter</button>
                </div>
            </div>

            <div class="card">
                <div class="card-header">Gestion des tokens</div>
                <div class="card-body">
                    <div id="token-info" style="margin-bottom: 15px; padding: 15px; background-color: #f8f9fa; border-radius: 8px;">
                        <div><strong>Access Token:</strong> <span id="access-token-status" class="text-danger">Non présent</span></div>
                        <div style="margin-top: 8px;"><strong>Refresh Token:</strong> <span id="refresh-token-status" class="text-danger">Non présent</span></div>
                    </div>
                    <button class="btn btn-primary" onclick="refreshToken()">Rafraîchir Token</button>
                    <button class="btn btn-secondary" onclick="verifyToken()">Vérifier Token</button>
                    <button class="btn btn-danger" onclick="logout()">Déconnexion</button>
                </div>
            </div>
        </div>

        <div class="card" style="margin-top: 20px;">
            <div class="card-header">Réinitialisation de mot de passe</div>
            <div class="card-body">
                <div class="form-group">
                    <label for="forgot-email">Email</label>
                    <input type="email" id="forgot-email" class="form-control" placeholder="Email pour réinitialisation">
                </div>
                <button class="btn btn-primary" onclick="forgotPassword()">Demander réinitialisation</button>

                <hr style="margin: 20px 0;">

                <h3 style="margin-bottom: 15px;">Compléter la réinitialisation</h3>
                <div class="form-group">
                    <label for="reset-token">Token de réinitialisation</label>
                    <input type="text" id="reset-token" class="form-control" placeholder="Token reçu par email">
                </div>
                <div class="form-group">
                    <label for="reset-password">Nouveau mot de passe</label>
                    <input type="password" id="reset-password" class="form-control" placeholder="Nouveau mot de passe">
                </div>
                <div class="form-group">
                    <label for="reset-confirm-password">Confirmer mot de passe</label>
                    <input type="password" id="reset-confirm-password" class="form-control" placeholder="Confirmer mot de passe">
                </div>
                <button class="btn btn-primary" onclick="resetPassword()">Réinitialiser mot de passe</button>
            </div>
        </div>
    </section>

    <!-- Users Module -->
    <section id="users-module" class="module-container">
        <div class="card-grid">
            <div class="card">
                <div class="card-header">Mon profil</div>
                <div class="card-body">
                    <button class="btn btn-primary" onclick="getCurrentUser()">Récupérer mon profil</button>

                    <div id="current-user-profile" style="margin-top: 20px; display: none;">
                        <h3 style="margin-bottom: 15px;">Information du profil</h3>
                        <div id="profile-details">
                            <!-- Profile details will be inserted here dynamically -->
                        </div>
                    </div>

                    <hr style="margin: 20px 0;">

                    <h3 style="margin-bottom: 15px;">Mettre à jour le profil</h3>
                    <div class="form-group">
                        <label for="update-display-name">Nom d'affichage</label>
                        <input type="text" id="update-display-name" class="form-control" placeholder="Nouveau nom d'affichage">
                    </div>
                    <div class="form-group">
                        <label for="update-first-name">Prénom</label>
                        <input type="text" id="update-first-name" class="form-control" placeholder="Prénom">
                    </div>
                    <div class="form-group">
                        <label for="update-last-name">Nom</label>
                        <input type="text" id="update-last-name" class="form-control" placeholder="Nom">
                    </div>
                    <div class="form-group">
                        <label for="update-bio">Bio</label>
                        <textarea id="update-bio" class="form-control form-control-textarea" placeholder="Votre bio..."></textarea>
                    </div>
                    <button class="btn btn-primary" onclick="updateProfile()">Mettre à jour le profil</button>
                </div>
            </div>
            
            <!-- Nouvelle carte pour les photos de profil -->
            <div class="card">
                <div class="card-header">Photo de profil</div>
                <div class="card-body">
                    <div id="profile-picture-container" style="margin-bottom: 20px; text-align: center;">
                        <div id="current-profile-picture" style="margin: 0 auto; width: 150px; height: 150px; border-radius: 50%; background-color: #e9ecef; overflow: hidden; display: flex; align-items: center; justify-content: center;">
                            <img id="profile-image" src="" alt="Photo de profil" style="max-width: 100%; max-height: 100%; display: none;">
                            <span id="profile-placeholder" style="font-size: 18px; color: #6c757d;">Aucune photo</span>
                        </div>
                    </div>

                    <h3 style="margin-bottom: 15px;">Mettre à jour la photo de profil</h3>
                    <div class="form-group">
                        <label for="profile-picture-url">URL de la photo</label>
                        <input type="url" id="profile-picture-url" class="form-control" placeholder="https://example.com/ma-photo.jpg">
                    </div>
                    <div class="form-group">
                        <label for="profile-picture-type">Type de photo</label>
                        <select id="profile-picture-type" class="form-control">
                            <option value="url">URL</option>
                            <option value="base64">Base64</option>
                        </select>
                    </div>
                    <div class="btn-group" style="margin-top: 10px;">
                        <button class="btn btn-primary" onclick="uploadProfilePicture()">Mettre à jour la photo</button>
                        <button class="btn btn-danger" onclick="deleteProfilePicture()">Supprimer la photo</button>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">Changer le mot de passe</div>
                <div class="card-body">
                    <div class="form-group">
                        <label for="current-password">Mot de passe actuel</label>
                        <input type="password" id="current-password" class="form-control" placeholder="Mot de passe actuel">
                    </div>
                    <div class="form-group">
                        <label for="new-password">Nouveau mot de passe</label>
                        <input type="password" id="new-password" class="form-control" placeholder="Nouveau mot de passe">
                    </div>
                    <div class="form-group">
                        <label for="confirm-new-password">Confirmer nouveau mot de passe</label>
                        <input type="password" id="confirm-new-password" class="form-control" placeholder="Confirmer nouveau mot de passe">
                    </div>
                    <button class="btn btn-primary" onclick="changePassword()">Changer le mot de passe</button>
                </div>
            </div>

            <div class="card">
                <div class="card-header">Administration (Admin seulement)</div>
                <div class="card-body">
                    <button class="btn btn-primary" onclick="getAllUsers()">Liste de tous les utilisateurs</button>

                    <div id="all-users-container" class="scroll-container" style="margin-top: 20px; display: none;">
                        <!-- All users will be inserted here dynamically -->
                    </div>

                    <hr style="margin: 20px 0;">

                    <h3 style="margin-bottom: 15px;">Récupérer un utilisateur par ID</h3>
                    <div class="form-group">
                        <label for="user-id">ID Utilisateur</label>
                        <input type="text" id="user-id" class="form-control" placeholder="ID utilisateur">
                    </div>
                    <button class="btn btn-primary" onclick="getUserById()">Récupérer l'utilisateur</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Roadbooks Module -->
    <section id="roadbooks-module" class="module-container">
        <div class="card-grid">
            <div class="card">
                <div class="card-header">Création de RoadBook</div>
                <div class="card-body">
                    <div class="form-group">
                        <label for="roadbook-title">Titre</label>
                        <input type="text" id="roadbook-title" class="form-control" placeholder="Titre" value="Mon RoadBook">
                    </div>
                    <div class="form-group">
                        <label for="roadbook-description">Description</label>
                        <textarea id="roadbook-description" class="form-control form-control-textarea" placeholder="Description">RoadBook pour mon apprentissage de conduite</textarea>
                    </div>
                    <div class="form-group">
                        <label for="roadbook-target-hours">Heures cibles</label>
                        <input type="number" id="roadbook-target-hours" class="form-control" placeholder="Heures cibles" value="30">
                    </div>
                    <button class="btn btn-primary" onclick="createRoadbook()">Créer un RoadBook</button>
                </div>
            </div>

            <div class="card">
                <div class="card-header">Mes RoadBooks</div>
                <div class="card-body">
                    <button class="btn btn-primary" onclick="getMyRoadbooks()">Récupérer mes RoadBooks</button>
                    <button class="btn btn-secondary" onclick="getGuidedRoadbooks()">RoadBooks où je suis guide</button>

                    <div id="roadbook-list" class="scroll-container" style="margin-top: 20px;">
                        <p>Aucun RoadBook trouvé</p>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">Détails du RoadBook</div>
                <div class="card-body">
                    <div class="form-group">
                        <label for="roadbook-id">ID du RoadBook</label>
                        <input type="text" id="roadbook-id" class="form-control" placeholder="ID du RoadBook">
                    </div>
                    <button class="btn btn-primary" onclick="getRoadbookById()">Récupérer détails</button>
                    <button class="btn btn-secondary" onclick="getRoadbookStatistics()">Récupérer statistiques</button>
                    <button class="btn btn-secondary" onclick="exportRoadbook()">Exporter (JSON)</button>

                    <hr style="margin: 20px 0;">

                    <h3 style="margin-bottom: 15px;">Changer le statut</h3>
                    <div class="form-group">
                        <label for="roadbook-status">Nouveau statut</label>
                        <select id="roadbook-status" class="form-control">
                            <option value="ACTIVE">Actif</option>
                            <option value="COMPLETED">Complété</option>
                            <option value="ARCHIVED">Archivé</option>
                        </select>
                    </div>
                    <button class="btn btn-primary" onclick="updateRoadbookStatus()">Mettre à jour le statut</button>

                    <hr style="margin: 20px 0;">

                    <h3 style="margin-bottom: 15px;">Assigner un guide</h3>
                    <div class="form-group">
                        <label for="guide-id">ID du guide</label>
                        <input type="text" id="guide-id" class="form-control" placeholder="ID utilisateur du guide">
                    </div>
                    <button class="btn btn-primary" onclick="assignGuide()">Assigner guide</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Sessions Module -->
    <section id="sessions-module" class="module-container">
        <div class="card-grid">
            <div class="card">
                <div class="card-header">Sessions d'un RoadBook</div>
                <div class="card-body">
                    <div class="form-group">
                        <label for="sessions-roadbook-id">ID du RoadBook</label>
                        <input type="text" id="sessions-roadbook-id" class="form-control" placeholder="ID du RoadBook">
                    </div>
                    <button class="btn btn-primary" onclick="getRoadbookSessions()">Récupérer les sessions</button>

                    <div id="sessions-list" class="scroll-container" style="margin-top: 20px;">
                        <p>Aucune session trouvée</p>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">Création de session</div>
                <div class="card-body">
                    <div class="form-group">
                        <label for="session-roadbook-id">ID du RoadBook</label>
                        <input type="text" id="session-roadbook-id" class="form-control" placeholder="ID du RoadBook">
                    </div>
                    <div class="form-group">
                        <label for="session-date">Date</label>
                        <input type="date" id="session-date" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="session-start-time">Heure de début</label>
                        <input type="time" id="session-start-time" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="session-end-time">Heure de fin</label>
                        <input type="time" id="session-end-time" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="session-duration">Durée (minutes)</label>
                        <input type="number" id="session-duration" class="form-control" placeholder="Durée en minutes">
                    </div>
                    <div class="form-group">
                        <label for="session-weather">Météo</label>
                        <select id="session-weather" class="form-control">
                            <option value="CLEAR">Dégagé</option>
                            <option value="CLOUDY">Nuageux</option>
                            <option value="RAINY">Pluvieux</option>
                            <option value="SNOWY">Neigeux</option>
                            <option value="FOGGY">Brouillard</option>
                            <option value="WINDY">Venteux</option>
                            <option value="OTHER">Autre</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="session-daylight">Luminosité</label>
                        <select id="session-daylight" class="form-control">
                            <option value="DAY">Jour</option>
                            <option value="NIGHT">Nuit</option>
                            <option value="DAWN_DUSK">Aube/Crépuscule</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="session-notes">Notes</label>
                        <textarea id="session-notes" class="form-control form-control-textarea" placeholder="Notes sur la session..."></textarea>
                    </div>
                    <button class="btn btn-primary" onclick="createSession()">Créer la session</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Badges Module -->
    <section id="badges-module" class="module-container">
        <div class="card-grid">
            <div class="card">
                <div class="card-header">Liste des badges</div>
                <div class="card-body">
                    <div class="form-group">
                        <label for="badge-category-filter">Filtrer par catégorie</label>
                        <select id="badge-category-filter" class="form-control">
                            <option value="">Toutes les catégories</option>
                            <option value="BEGINNER">Débutant</option>
                            <option value="MANEUVERING">Manœuvres</option>
                            <option value="ADVANCED">Avancé</option>
                            <option value="SPECIAL">Spécial</option>
                            <option value="SOCIAL">Social</option>
                        </select>
                    </div>
                    <button class="btn btn-primary" onclick="getAllBadges()">Afficher tous les badges</button>
                    <button class="btn btn-secondary" onclick="getBadgesByCategory()">Filtrer par catégorie</button>
                    
                    <div id="badges-list-container" class="scroll-container" style="margin-top: 20px; display: none;">
                        <!-- Liste des badges affichée dynamiquement -->
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">Mes badges</div>
                <div class="card-body">
                    <button class="btn btn-primary" onclick="getUserBadges()">Afficher mes badges</button>
                    <button class="btn btn-secondary" onclick="checkAndAwardBadges()">Vérifier les nouveaux badges</button>
                    
                    <div class="form-group" style="margin-top: 15px;">
                        <label for="badge-user-id">ID de l'utilisateur (laissez vide pour vous-même)</label>
                        <input type="text" id="badge-user-id" class="form-control" placeholder="ID de l'utilisateur">
                    </div>
                    <button class="btn btn-primary" onclick="getUserBadges()">Afficher les badges de l'utilisateur</button>
                    
                    <div id="user-badges-container" class="scroll-container" style="margin-top: 20px; display: none;">
                        <!-- Badges de l'utilisateur affichés dynamiquement -->
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">Détails du badge</div>
                <div class="card-body">
                    <div class="form-group">
                        <label for="badge-id-input">ID du badge</label>
                        <input type="text" id="badge-id-input" class="form-control" placeholder="ID du badge">
                    </div>
                    <button class="btn btn-primary" onclick="getBadgeDetails()">Afficher les détails</button>
                    
                    <div id="badge-details-container" style="margin-top: 20px; display: none;">
                        <!-- Détails du badge affichés dynamiquement -->
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card" style="margin-top: 20px;">
            <div class="card-header">Tableau des meilleurs utilisateurs</div>
            <div class="card-body">
                <button class="btn btn-primary" onclick="getBadgeLeaderboard()">Afficher le classement</button>
                
                <div id="leaderboard-container" style="margin-top: 20px; display: none;">
                    <!-- Classement affiché dynamiquement -->
                </div>
            </div>
        </div>
        
        <div class="card" style="margin-top: 20px;">
            <div class="card-header">Administration des badges (Admin seulement)</div>
            <div class="card-body">
                <div class="form-group">
                    <h4>Créer un nouveau badge</h4>
                    <div class="form-group">
                        <label for="create-badge-name">Nom</label>
                        <input type="text" id="create-badge-name" class="form-control" placeholder="Nom du badge">
                    </div>
                    <div class="form-group">
                        <label for="create-badge-description">Description</label>
                        <textarea id="create-badge-description" class="form-control" placeholder="Description du badge"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="create-badge-image-url">URL de l'image</label>
                        <input type="text" id="create-badge-image-url" class="form-control" placeholder="URL de l'image">
                    </div>
                    <div class="form-group">
                        <label for="create-badge-category">Catégorie</label>
                        <select id="create-badge-category" class="form-control">
                            <option value="BEGINNER">Débutant</option>
                            <option value="MANEUVERING">Manœuvres</option>
                            <option value="ADVANCED">Avancé</option>
                            <option value="SPECIAL">Spécial</option>
                            <option value="SOCIAL">Social</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="create-badge-criteria">Critères d'obtention</label>
                        <select id="create-badge-criteria" class="form-control">
                            <option value="FIRST_SESSION">Première session de conduite</option>
                            <option value="FIVE_SESSIONS">Cinq sessions de conduite</option>
                            <option value="TEN_SESSIONS">Dix sessions de conduite</option>
                            <option value="TWENTY_SESSIONS">Vingt sessions de conduite</option>
                            <option value="FIRST_COMPETENCY">Première compétence maîtrisée</option>
                            <option value="FIVE_COMPETENCIES">Cinq compétences maîtrisées</option>
                            <option value="PHASE_COMPLETE">Phase complétée</option>
                            <option value="ALL_PHASES_COMPLETE">Toutes les phases complétées</option>
                            <option value="COMMUNITY_ACTIVE">Actif dans la communauté</option>
                        </select>
                    </div>
                    <button class="btn btn-primary" onclick="createBadge()">Créer le badge</button>
                </div>
                
                <hr style="margin: 20px 0">
                
                <div id="award-badge-form">
                    <h4>Attribuer un badge</h4>
                    <div class="form-group">
                        <label for="award-user-id">ID de l'utilisateur</label>
                        <input type="text" id="award-user-id" class="form-control" placeholder="ID de l'utilisateur">
                    </div>
                    <div class="form-group">
                        <label for="award-badge-id">ID du badge</label>
                        <input type="text" id="award-badge-id" class="form-control" placeholder="ID du badge">
                    </div>
                    <button class="btn btn-primary" onclick="awardBadge()">Attribuer le badge</button>
                </div>
                
                <hr style="margin: 20px 0">
                
                <div id="revoke-badge-form">
                    <h4>Révoquer un badge</h4>
                    <div class="form-group">
                        <label for="revoke-user-id">ID de l'utilisateur</label>
                        <input type="text" id="revoke-user-id" class="form-control" placeholder="ID de l'utilisateur">
                    </div>
                    <div class="form-group">
                        <label for="revoke-badge-id">ID du badge</label>
                        <input type="text" id="revoke-badge-id" class="form-control" placeholder="ID du badge">
                    </div>
                    <button class="btn btn-danger" onclick="revokeBadge()">Révoquer le badge</button>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Community Module -->
    <section id="community-module" class="module-container">
        <div class="card-grid">
            <div class="card">
                <div class="card-header">Publications</div>
                <div class="card-body">
                    <div class="form-inline" style="margin-bottom: 15px;">
                        <div class="form-group">
                            <label for="posts-page" style="margin-right: 10px;">Page:</label>
                            <input type="number" id="posts-page" class="form-control" min="1" value="1" style="width: 70px;">
                        </div>
                        <div class="form-group" style="margin-left: 15px;">
                            <label for="posts-limit" style="margin-right: 10px;">Par page:</label>
                            <input type="number" id="posts-limit" class="form-control" min="5" max="50" value="10" style="width: 70px;">
                        </div>
                        <div class="form-group" style="margin-left: 15px;">
                            <label for="posts-sort" style="margin-right: 10px;">Trier par:</label>
                            <select id="posts-sort" class="form-control" style="width: 120px;">
                                <option value="createdAt">Date création</option>
                                <option value="updatedAt">Date mise à jour</option>
                                <option value="title">Titre</option>
                            </select>
                        </div>
                        <div class="form-group" style="margin-left: 15px;">
                            <label for="posts-order" style="margin-right: 10px;">Ordre:</label>
                            <select id="posts-order" class="form-control" style="width: 80px;">
                                <option value="desc">Décroissant</option>
                                <option value="asc">Croissant</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <button class="btn btn-primary" onclick="getPosts()">Afficher les publications</button>
                        
                        <div class="input-group" style="margin-top: 10px;">
                            <input type="text" id="post-search-input" class="form-control" placeholder="Rechercher des publications...">
                            <div class="input-group-append">
                                <button class="btn btn-primary" onclick="searchPosts()">Rechercher</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group" style="margin-top: 15px;">
                        <label for="post-user-id">Publications d'un utilisateur spécifique:</label>
                        <div class="input-group">
                            <input type="text" id="post-user-id" class="form-control" placeholder="ID de l'utilisateur">
                            <div class="input-group-append">
                                <button class="btn btn-secondary" onclick="getUserPosts()">Afficher</button>
                            </div>
                        </div>
                    </div>
                    
                    <div id="posts-container" class="scroll-container" style="margin-top: 20px; display: none;">
                        <!-- Publications affichées dynamiquement -->
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">Créer une publication</div>
                <div class="card-body">
                    <div class="form-group">
                        <label for="post-title">Titre</label>
                        <input type="text" id="post-title" class="form-control" placeholder="Titre de la publication">
                    </div>
                    <div class="form-group">
                        <label for="post-content">Contenu</label>
                        <textarea id="post-content" class="form-control form-control-textarea" placeholder="Contenu de la publication..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="post-media-urls">URLs des médias (une par ligne)</label>
                        <textarea id="post-media-urls" class="form-control" placeholder="https://example.com/image.jpg"></textarea>
                    </div>
                    <button class="btn btn-primary" onclick="createPost()">Publier</button>
                </div>
            </div>
        </div>
        
        <div class="card" style="margin-top: 20px;">
            <div class="card-header">Détails de la publication</div>
            <div class="card-body">
                <div class="form-group">
                    <label for="post-id-input">ID de la publication</label>
                    <input type="text" id="post-id-input" class="form-control" placeholder="ID de la publication">
                </div>
                <button class="btn btn-primary" onclick="getPostDetails()">Afficher les détails</button>
                
                <div id="post-details-container" style="margin-top: 20px; display: none;">
                    <!-- Détails de la publication affichés dynamiquement -->
                </div>
                
                <div id="post-likes-container" style="margin-top: 20px; display: none;">
                    <!-- Liste des utilisateurs qui ont aimé la publication -->
                </div>
            </div>
        </div>
    </section>

    <!-- Notifications Module -->
    <section id="notifications-module" class="module-container">
        <div class="card-grid">
            <div class="card">
                <div class="card-header">
                    <span>Notifications</span>
                    <span id="notification-count" class="badge badge-primary" style="display: none;">0</span>
                </div>
                <div class="card-body">
                    <div class="form-inline" style="margin-bottom: 15px;">
                        <div class="form-group">
                            <label for="notification-page" style="margin-right: 10px;">Page:</label>
                            <input type="number" id="notification-page" class="form-control" min="1" value="1" style="width: 70px;">
                        </div>
                        <div class="form-group" style="margin-left: 15px;">
                            <label for="notification-limit" style="margin-right: 10px;">Nombre par page:</label>
                            <input type="number" id="notification-limit" class="form-control" min="5" max="50" value="20" style="width: 70px;">
                        </div>
                        <div class="form-group" style="margin-left: 15px;">
                            <div class="form-check">
                                <input type="checkbox" id="include-read-checkbox" class="form-check-input" checked>
                                <label for="include-read-checkbox" class="form-check-label">Inclure lues</label>
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="getUserNotifications()" style="margin-left: 15px;">Rafraîchir</button>
                    </div>
                    
                    <div class="form-group">
                        <button class="btn btn-primary" onclick="getUserNotifications()">Afficher mes notifications</button>
                        <button class="btn btn-secondary" onclick="getUnreadCount()">Vérifier non lues</button>
                        <button class="btn btn-secondary" onclick="markAllAsRead()">Tout marquer comme lu</button>
                        <button class="btn btn-danger" onclick="deleteAllNotifications()">Supprimer toutes</button>
                    </div>
                    
                    <div id="notifications-container" class="scroll-container" style="margin-top: 20px; display: none;">
                        <!-- Notifications affichées dynamiquement -->
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">Administration (Admin seulement)</div>
                <div class="card-body">
                    <div class="form-group">
                        <label for="cleanup-days">Supprimer les notifications lues plus anciennes que (jours):</label>
                        <input type="number" id="cleanup-days" class="form-control" min="1" value="30">
                    </div>
                    <button class="btn btn-danger" onclick="cleanupOldNotifications()">Nettoyer les anciennes notifications</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Competencies Module -->
    <section id="competencies-module" class="module-container">
        <div class="card-grid">
            <div class="card">
                <div class="card-header">Liste des compétences</div>
                <div class="card-body">
                    <div class="form-group">
                        <label for="competency-phase-filter">Filtrer par phase</label>
                        <select id="competency-phase-filter" class="form-control">
                            <option value="">Toutes les phases</option>
                            <option value="PHASE1">Phase 1 - Bases</option>
                            <option value="PHASE2">Phase 2 - Environnement routier simple</option>
                            <option value="PHASE3">Phase 3 - Situations complexes</option>
                            <option value="PHASE4">Phase 4 - Conditions spéciales</option>
                            <option value="PHASE5">Phase 5 - Autonomie</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="competency-category-filter">Filtrer par catégorie</label>
                        <select id="competency-category-filter" class="form-control">
                            <option value="">Toutes les catégories</option>
                            <option value="CONTROL">Contrôle du véhicule</option>
                            <option value="MANEUVERING">Manœuvres</option>
                            <option value="TRAFFIC_RULES">Règles de circulation</option>
                            <option value="RISK_PERCEPTION">Perception des risques</option>
                            <option value="ECOFRIENDLY_DRIVING">Conduite écologique</option>
                            <option value="SPECIAL_CONDITIONS">Conditions spéciales</option>
                            <option value="SAFETY">Sécurité</option>
                        </select>
                    </div>
                    <button class="btn btn-primary" onclick="getAllCompetencies()">Rechercher les compétences</button>
                    
                    <div id="competencies-list-container" class="scroll-container" style="margin-top: 20px; display: none;">
                        <!-- Liste des compétences affichée dynamiquement -->
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">Détails d'une compétence</div>
                <div class="card-body">
                    <div class="form-group">
                        <label for="competency-id-input">ID de la compétence</label>
                        <input type="text" id="competency-id-input" class="form-control" placeholder="ID de la compétence">
                    </div>
                    <button class="btn btn-primary" onclick="getCompetencyById()">Afficher les détails</button>
                    
                    <div id="competency-details-container" style="margin-top: 20px; display: none;">
                        <!-- Détails de la compétence affichés dynamiquement -->
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">Progression des compétences</div>
                <div class="card-body">
                    <div class="form-group">
                        <label for="roadbook-id-input">ID du RoadBook</label>
                        <input type="text" id="roadbook-id-input" class="form-control" placeholder="ID du RoadBook">
                    </div>
                    <button class="btn btn-primary" onclick="getCompetencyProgressForRoadbook()">Afficher la progression</button>
                    
                    <div id="competency-progress-container" style="margin-top: 20px; display: none;">
                        <!-- Progression des compétences affichée dynamiquement -->
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card" style="margin-top: 20px;">
            <div class="card-header">Mettre à jour une compétence</div>
            <div class="card-body">
                <div id="update-competency-form">
                    <div class="form-group">
                        <label for="update-roadbook-id">ID du RoadBook</label>
                        <input type="text" id="update-roadbook-id" class="form-control" placeholder="ID du RoadBook">
                    </div>
                    <div class="form-group">
                        <label for="update-competency-id">ID de la compétence</label>
                        <input type="text" id="update-competency-id" class="form-control" placeholder="ID de la compétence">
                    </div>
                    <div class="form-group">
                        <label for="update-status">Statut</label>
                        <select id="update-status" class="form-control">
                            <option value="NOT_STARTED">Non débutée</option>
                            <option value="IN_PROGRESS">En progression</option>
                            <option value="MASTERED">Maîtrisée</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="update-notes">Notes</label>
                        <textarea id="update-notes" class="form-control form-control-textarea" placeholder="Notes sur la progression..."></textarea>
                    </div>
                    <button class="btn btn-primary" onclick="updateCompetencyStatus()">Mettre à jour</button>
                </div>
            </div>
        </div>
        
        <div class="card" style="margin-top: 20px;">
            <div class="card-header">Valider des compétences en session</div>
            <div class="card-body">
                <div id="validation-form">
                    <div class="form-group">
                        <label for="validation-session-id">ID de la session</label>
                        <input type="text" id="validation-session-id" class="form-control" placeholder="ID de la session">
                    </div>
                    
                    <div class="alert alert-info">
                        Pour valider des compétences, sélectionnez d'abord la session, puis utilisez le bouton "Sélectionner" 
                        dans la liste des compétences pour ajouter des compétences à valider.
                    </div>
                    
                    <div id="validation-competencies" class="scroll-container" style="margin-top: 20px;">
                        <div class="validation-message">Sélectionnez des compétences dans la liste pour les valider</div>
                        
                        <!-- Les compétences à valider seront ajoutées dynamiquement ici -->
                        <div class="competencies-to-validate">
                            <!-- Exemple de structure (sera générée dynamiquement) -->
                            <!-- 
                            <div class="competency-validation-item">
                                <input type="checkbox" name="validate-competency" value="comp-id-1" id="validate-comp-1">
                                <label for="validate-comp-1">Nom de la compétence</label>
                                <textarea id="validation-notes-comp-id-1" placeholder="Notes de validation..."></textarea>
                            </div>
                            -->
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="validateCompetencies()">Valider les compétences</button>
                </div>
            </div>
        </div>
        
        <div class="card" style="margin-top: 20px;">
            <div class="card-header">Statistiques des compétences</div>
            <div class="card-body">
                <div class="form-group">
                    <label for="apprentice-id-input">ID de l'apprenti (laissez vide pour vous-même)</label>
                    <input type="text" id="apprentice-id-input" class="form-control" placeholder="ID de l'apprenti (optionnel)">
                </div>
                <button class="btn btn-primary" onclick="getApprenticeCompetencyStats()">Afficher les statistiques</button>
                
                <div id="competency-stats-container" style="margin-top: 20px; display: none;">
                    <!-- Statistiques affichées dynamiquement -->
                </div>
            </div>
        </div>
    </section>

    <!-- Debug Module -->
    <section id="debug-module" class="module-container">
        <div class="card">
            <div class="card-header">Console API</div>
            <div class="card-body">
                <textarea id="response-output" readonly placeholder="Les réponses API apparaîtront ici..."></textarea>
            </div>
        </div>
    </section>

    <!-- Charger les fichiers modulaires -->
    <!-- Configuration et utilitaires -->
    <script src="js/api.js"></script>
    <script src="js/ui.js"></script>
    
    <!-- Modules fonctionnels -->
    <script src="js/modules/auth.js"></script>
    <script src="js/modules/users.js"></script>
    <script src="js/modules/roadbooks.js"></script>
    <script src="js/modules/sessions.js"></script>
    <script src="js/modules/competencies.js"></script>
    
    <!-- Configuration globale et point d'entrée principal -->
    <script src="js/config.js"></script>
    <script src="js/app.js"></script>
    
    <!-- Informations sur les routes disponibles (injectées par le serveur) -->
    <script>
        // Ces données sont injectées dynamiquement par le serveur
        const availableRoutes = <!-- ROUTE_LIST --> || [];
        
        // Log pour le débogage
        if (availableRoutes.length > 0) {
            console.log('Routes API disponibles:', availableRoutes);
        }
    </script>
</body>
</html>